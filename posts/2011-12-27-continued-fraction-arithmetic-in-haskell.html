<!DOCTYPE html><html lang="en"><head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' cdn.jsdelivr.net; script-src 'self' 'unsafe-inline' cdn.jsdelivr.net requirejs.org www.google-analytics.com www.googletagmanager.com; style-src 'self' 'unsafe-inline' cdn.jsdelivr.net fonts.googleapis.com data:; img-src 'self' *; media-src 'self' ;">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="The Art Gallery Guardian">
    <meta name="author" content="Chao Xu">
    <meta name="google-site-verification" content="YE2oeW4OwVOPdVVfdpYIakOuD0A2Qo80W_sUbMJDGok">
    <meta property="og:title" content="Continued Fraction Arithmetic in Haskell">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="The Art Gallery Guardian">
    <meta property="article:tag" content="Haskell">
    <title>Continued Fraction Arithmetic in Haskell</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-4171915-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-4171915-2');
  </script>

  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/default.css" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/blog.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://chaoxuprime.com/rss.xml">
  </head>
  <body>
    <header class="hide-on-print">
        <div id="site-title">
            <a href="/blog.html">The Art Gallery Guardian</a>
        </div>
        <div style="display: none;">
          <img src="/files/chao/chao_thumb.jpg">
        </div>
    </header>
    <nav class="hide-on-print">
      <ul>
        <li><a href="/">About</a></li>
        <li><a href="/blog.html">Blog</a></li>
        <li><a href="/files/cv.pdf">CV</a></li>
        <li><a href="/tools.html">Tools</a></li>
      </ul>
    </nav>
    <main>
      <article>
        <h1 id="article-title">Continued Fraction Arithmetic in Haskell</h1>
        <br>
<div>
<p>I learned the algorithm to do arithmetic on continued fractions from the <a href="http://perl.plover.com/yak/cftalk/">talk by Mark Jason Dominus</a>. This algorithm can be generalized to handle many other kind of functions.</p>
<p>I wrote an module ContinuedFraction in Haskell. It is an instance of the type class RealFrac. So you can use the four arithmetic operations like it’s any other kind of real numbers.</p>
<p>A continued fraction is implemented as a list of <code>Integral</code>. Infinite continued fraction is possible! Although lazy evaluation make it easy to get only the first <span class="math inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span style="margin-right: 0.03148em;" class="mord mathdefault">k</span></span></span></span></span> terms, some operation will not terminate. Currently, the only one I know of is comparing two equal infinite continued fractions. So make sure only compare a truncated version of two infinite continued fractions.</p>
<p>It is possible to create formal continued fractions that doesn’t correspond to any real number. No one know what will the arithmetic outcomes be.</p>
<p>A continued fraction is canonical if the sign of all the numbers are the same. One can create non-canonical continued fractions that does converge to a real number. For example, <code>ContinuedFraction [1,1,-2]</code> is actually <code>ContinuedFraction [3]</code>. Conversion to canonical version is easy, add it by <code>ContinuedFraction [0]</code>.</p>
<p>Order operations does not work with non-canonical representations.</p>
<p>The code will stay in <a href="https://github.com/chaoxu/mgccl-haskell/blob/master/random/ContinuedFraction.hs">this page</a> until one day I have the patience and motivation to make this into a package. This is why I need a internship in a company that actually use Haskell.</p>
<p>I hope people can catch possible bugs. I’m open to suggestions!</p>
</div>
<div class="hide-on-print">
    <div class="info">Posted by <a href="https://chaoxuprime.com">Chao Xu</a> on <time datetime="2011-12-27">2011-12-27</time>. </div>
    <div class="info">Tags: Haskell.</div>
</div>
      </article>
    </main>
    <footer class="hide-on-print">© 2010 - <time><script>document.write(new Date().getFullYear())</script></time> <a href="https://chaoxuprime.com" rel="author">Chao Xu</a>. Licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
    <a href="/README.html">Blog README</a>.</footer>
  

</body></html>
